(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
function forEach(r,t,o){if(!isFunction(t))throw new TypeError("iterator must be a function");arguments.length<3&&(o=this),"[object Array]"===toString.call(r)?forEachArray(r,t,o):"string"==typeof r?forEachString(r,t,o):forEachObject(r,t,o)}function forEachArray(r,t,o){for(var n=0,a=r.length;n<a;n++)hasOwnProperty.call(r,n)&&t.call(o,r[n],n,r)}function forEachString(r,t,o){for(var n=0,a=r.length;n<a;n++)t.call(o,r.charAt(n),n,r)}function forEachObject(r,t,o){for(var n in r)hasOwnProperty.call(r,n)&&t.call(o,r[n],n,r)}var isFunction=require("is-function");module.exports=forEach;var toString=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty;

},{"is-function":3}],2:[function(require,module,exports){
(function (global){
var win;win="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},module.exports=win;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],3:[function(require,module,exports){
function isFunction(o){var t=toString.call(o);return"[object Function]"===t||"function"==typeof o&&"[object RegExp]"!==t||"undefined"!=typeof window&&(o===window.setTimeout||o===window.alert||o===window.confirm||o===window.prompt)}module.exports=isFunction;var toString=Object.prototype.toString;

},{}],4:[function(require,module,exports){
var trim=require("trim"),forEach=require("for-each"),isArray=function(r){return"[object Array]"===Object.prototype.toString.call(r)};module.exports=function(r){if(!r)return{};var t={};return forEach(trim(r).split("\n"),function(r){var i=r.indexOf(":"),e=trim(r.slice(0,i)).toLowerCase(),o=trim(r.slice(i+1));void 0===t[e]?t[e]=o:isArray(t[e])?t[e].push(o):t[e]=[t[e],o]}),t};

},{"for-each":1,"trim":5}],5:[function(require,module,exports){
function trim(r){return r.replace(/^\s*|\s*$/g,"")}exports=module.exports=trim,exports.left=function(r){return r.replace(/^\s*/,"")},exports.right=function(r){return r.replace(/\s*$/,"")};

},{}],6:[function(require,module,exports){
"use strict";function forEachArray(e,t){for(var r=0;r<e.length;r++)t(e[r])}function isEmpty(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function initParams(e,t,r){var n=e;return isFunction(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=xtend(t,{uri:e}),n.callback=r,n}function createXHR(e,t,r){return t=initParams(e,t,r),_createXHR(t)}function _createXHR(e){function t(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,o(e,R)}function r(){if(!i){var t;clearTimeout(u),t=e.useXDR&&void 0===s.status?200:1223===s.status?204:s.status;var r=R,n=null;return 0!==t?(r={body:function(){var e=void 0;if(e=s.response?s.response:s.responseText||getXml(s),m)try{e=JSON.parse(e)}catch(e){}return e}(),statusCode:t,method:d,headers:{},url:c,rawRequest:s},s.getAllResponseHeaders&&(r.headers=parseHeaders(s.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),o(n,r,r.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var n=!1,o=function(t,r,o){n||(n=!0,e.callback(t,r,o))},s=e.xhr||null;s||(s=e.cors||e.useXDR?new createXHR.XDomainRequest:new createXHR.XMLHttpRequest);var a,i,u,c=s.url=e.uri||e.url,d=s.method=e.method||"GET",p=e.body||e.data,l=s.headers=e.headers||{},f=!!e.sync,m=!1,R={body:void 0,headers:{},statusCode:0,method:d,url:c,rawRequest:s};if("json"in e&&!1!==e.json&&(m=!0,l.accept||l.Accept||(l.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(l["content-type"]||l["Content-Type"]||(l["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),s.onreadystatechange=function(){4===s.readyState&&setTimeout(r,0)},s.onload=r,s.onerror=t,s.onprogress=function(){},s.onabort=function(){i=!0},s.ontimeout=t,s.open(d,c,!f,e.username,e.password),f||(s.withCredentials=!!e.withCredentials),!f&&e.timeout>0&&(u=setTimeout(function(){if(!i){i=!0,s.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",t(e)}},e.timeout)),s.setRequestHeader)for(a in l)l.hasOwnProperty(a)&&s.setRequestHeader(a,l[a]);else if(e.headers&&!isEmpty(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(s.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(s),s.send(p||null),s}function getXml(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function noop(){}var window=require("global/window"),isFunction=require("is-function"),parseHeaders=require("parse-headers"),xtend=require("xtend");module.exports=createXHR,createXHR.XMLHttpRequest=window.XMLHttpRequest||noop,createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:window.XDomainRequest,forEachArray(["get","put","post","patch","head","delete"],function(e){createXHR["delete"===e?"del":e]=function(t,r,n){return r=initParams(t,r,n),r.method=e.toUpperCase(),_createXHR(r)}});

},{"global/window":2,"is-function":3,"parse-headers":4,"xtend":7}],7:[function(require,module,exports){
function extend(){for(var r={},e=0;e<arguments.length;e++){var t=arguments[e];for(var n in t)hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty;

},{}],8:[function(require,module,exports){
function patchworkDownloader(){var e=document.querySelector("main .platform"),t=document.querySelector("main .version"),r=document.querySelector("main .url"),o=document.querySelector("main .asset"),n=getPlatform(navigator.platform);console.log("platform",n),e.textContent=n,getLatestRelease(function(e,s){if(e)throw e;console.log("release",s),t.textContent=s.version,r.textContent=s.url,r.href=s.url,o.textContent=s.assets[n],o.href=s.assets[n]})}function getPlatform(e){return"MAC"===e.substring(0,3).toUpperCase()?"mac":"WIN"===e.substring(0,3).toUpperCase()?"windows":"LINUX"===e.substring(0,5).toUpperCase()?"linux":null}function getLatestRelease(e,t){t||(t=e,e={});var r=e,o=r.base,n=void 0===o?"https://api.github.com/repos/":o,s=r.target,a=void 0===s?"/releases/latest":s,l=r.owner,i=void 0===l?"ssbc":l,u=r.repo;xhr({url:""+n+i+"/"+(void 0===u?"patchwork":u)+a,responseType:"json"},function(e,r,o){if(e)return t(e);var n=o.tag_name,s=o.html_url,a=findAssetUrls(o.assets);t(null,{version:n,url:s,assets:a})})}function findAssetUrls(e){var t={};return e.forEach(function(e){var r=e.browser_download_url,o=r.split(".");o=o[o.length-1];for(var n in executablesByPlatform)if(~executablesByPlatform[n].indexOf(o))return void(t[n]=r)}),t}var xhr=require("xhr");patchworkDownloader();var executablesByPlatform={mac:["dmg"],windows:["exe"],linux:["AppImage"]};

},{"xhr":6}]},{},[8]);
